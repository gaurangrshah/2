---
import Timeline from "../components/Timeline.astro";
import AboutCard from "./AboutCard.astro";

const skills = {
  about: [
    {
      title: "Your Skills",
      description:
        "I have a wide range of skills and experience in both the front and back end of web development.",
      link: "/skills",
      linkText: "View Skills",
      index: 1,
      icon: "ph:circles-three",
    },
    {
      title: "Your Skills",
      description:
        "I have a wide range of skills and experience in both the front and back end of web development.",
      link: "/skills",
      linkText: "View Skills",
      index: 2,
    },
    {
      title: "Your Skills",
      description:
        "I have a wide range of skills and experience in both the front and back end of web development.",
      link: "/skills",
      linkText: "View Skills",
    },
    {
      title: "Your Skills",
      description:
        "I have a wide range of skills and experience in both the front and back end of web development.",
      link: "/skills",
      linkText: "View Skills",
    },
  ],
};
---

<section id='about' class=''>
  <div class='w-full max-w-6xl flex mx-auto'>
    <div
      id='info'
      class='px-4 md:group w-full max-w-2xl flex flex-col justify-start gap-9 mx-auto'
    >
      <div class='section md:peer mb-24 md:mb-0' data-section='about'>
        <h5
          class='mb-12 border-2 rounded-xl font-semibold max-w-[7rem] text-center initial'
        >
          About
        </h5>
        <p
          class='bg-base-200/30 p-6 rounded-md leading-relaxed pb-6 text-secondary-content initial'
          style='--gs-delay:0.5s'
        >
          Hey there! I'm Gaurang, a full stack developer with over 12 years of
          experience in the design, development and consulting industries. At my
          core I am a problem solver and I love to learn new things. I am
          extremely passionate about technology and always looking for new ways
          to use it to bring people closer and make true connections. I am truly
          optimistic about the future because of my experience with technology
          and the people I've had the honor of working with thoughout my career.
        </p>

        <ul class='w-full flex flex-wrap gap-3 my-9'>
          {
            skills.about.map((skill, i: number) => {
              return (
                <AboutCard
                  title={skill.title}
                  description={skill.description}
                  link={skill.link}
                  linkText={skill.linkText}
                  index={i + 1}
                  icon={skill.icon}
                />
              );
            })
          }
        </ul>
      </div>
      <div class='section md:peer md:hidden' data-section='exp'>
        <h5
          class='px-3 mb-12 border-2 rounded-xl font-semibold max-w-[12rem] text-center initial'
        >
          Experience
        </h5>
        <p
          class='bg-base-200/30 p-6 rounded-md leading-relaxed pb-6 text-secondary-content initial'
          style='--gs-delay:0.5s;'
        >
          I initially got into technology because of the amazement I feel
          everyday as I watch the world around me as it is transformed by
          ordinary people just like me. With each new advancement, new doors are
          opened and new opportunities are created. I am excited to see what the
          future holds and I am eager to be a part of it.
        </p>
        <Timeline />
      </div>
    </div>

    <ul
      class='menu bg-base-200/30 w-56 rounded-box hidden md:block max-h-24 secondary'
    >
      <li class='secondary' style='--gs-delay:1s;'>
        <button data-section='about' disabled>
          <svg
            xmlns='http://www.w3.org/2000/svg'
            class='h-5 w-5'
            fill='none'
            viewBox='0 0 24 24'
            stroke='currentColor'
            ><path
              stroke-linecap='round'
              stroke-linejoin='round'
              stroke-width='2'
              d='M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6'
            ></path></svg
          >
           About
        </button>
      </li>
      <li class='secondary'>
        <button data-section='exp' style='--gs-delay:1.5s;'>
          <svg
            xmlns='http://www.w3.org/2000/svg'
            class='h-5 w-5'
            fill='none'
            viewBox='0 0 24 24'
            stroke='currentColor'
            ><path
              stroke-linecap='round'
              stroke-linejoin='round'
              stroke-width='2'
              d='M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z'
            ></path></svg
          >
           Experience
        </button>
      </li>
    </ul>
  </div>
</section>

<script>
  const buttons = document.querySelectorAll("#about button");
  const info = document.querySelector("#info");
  const sections = info?.querySelectorAll(".section");

  buttons.forEach((button) => {
    button.addEventListener("click", () => {
      const sectionId = (button as HTMLAnchorElement).dataset.section;
      sections?.forEach((section) => {
        section.classList.add("md:hidden");
      });

      buttons.forEach((btn) => {
        btn.removeAttribute("disabled");
      });
      const current = document.querySelector(
        `.section[data-section='${sectionId}']`
      );
      current?.classList.remove("md:hidden");
      const currBtn = document.querySelector(
        `button[data-section='${sectionId}']`
      ); // Disable the currently active button

      currBtn?.setAttribute("disabled", "true");
    });
  });
</script>

<style>
  .section {
    transition: opacity 0.65s ease-in-out;
    opacity: 0;
  }

  .section:not(.hidden) {
    opacity: 1;
  }

  button {
    transition: opacity 0.5s ease-in-out;
    transition: background 0.25 ease-in-out;
  }

  button:not(:disabled):hover {
    opacity: 0.5;
    background: oklch(var(--p));
  }

  button[disabled] {
    opacity: 0.5;
    background: oklch(var(--p));
    pointer-events: none;
    cursor: not-allowed;
  }
  [astro-icon] {
    width: 2rem;
    height: 2rem;
  }
</style>
